(this["webpackJsonpfinal-project"]=this["webpackJsonpfinal-project"]||[]).push([[0],[,,function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QCwRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgExAAIAAAAkAAAAWodpAAQAAAABAAAAfgAAAAAAAABIAAAAAQAAAEgAAAABQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkAAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAMegAwAEAAAAAQAAAMcAAAAA/+ELAmh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozODc0OUY3NDBGRTcxMUU4OTk2NEFBNDY3N0FFNTkwNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozODc0OUY3NTBGRTcxMUU4OTk2NEFBNDY3N0FFNTkwNiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM4NzQ5RjcyMEZFNzExRTg5OTY0QUE0Njc3QUU1OTA2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM4NzQ5RjczMEZFNzExRTg5OTY0QUE0Njc3QUU1OTA2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz4A/+0AOFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAAOEJJTQQlAAAAAAAQ1B2M2Y8AsgTpgAmY7PhCfv/AABEIAMcAxwMBEQACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2wBDAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwODxAPDgwTExQUExMcGxsbHB8fHx8fHx8fHx//2wBDAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//3QAEABn/2gAMAwEAAhEDEQA/APfsUAGBQAUAGBQAYoAMCgAxQAYoAMUAGKADFABigAxQAUAFABigAwKADAoAMUAGBQAYFABgUAGKADFABigD/9D3+gAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD/0ff6ACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP/S9/oAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA/9P3+gAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD/1Pf6ACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP/V9/oAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA/9b3+gAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD/1/f6ACgAoAKACgAoAKACgAwfQ0AGD6GgAwfQ0AGD6GgAwfQ0AGD6GgAwfQ0AGD6GgAwfSgAoAKACgAoAKACgAoAKAP/Q9/oAKACgAoAKACgAoAKAOA02z1TU7ieOC6ZDF8zb5JAMFiBjBNAGh/wi2v8A/P8AD/v7LQAf8Itr/wDz/D/v7LQAf8Itr/8Az/D/AL+y0AH/AAi2v/8AP8P+/stAB/wi2v8A/P8AD/v7LQAv/CLa/wD8/wAP+/stACf8Itr/APz/AA/7+y0AN8MtdJr0tvNM8nlJKrAuzLlWAyAxoA7GgAoAKACgAoAKACgAoA//0ff6ACgAoAKACgAoAKACgDkfBX/H9e/7q/8Aow0AZl9rGrJe3CJeSqiyuFUNwAGIAFAEthL4nvywtbiZ1XhnL7VB9Mnv7UAJfzeJrBlF1cTIG+64fcp9gR3oAq/21rH/AD+zf990AH9tax/z+zf990AH9tax/wA/s3/fdAG74Rv765vJ1uLiSZVjBUOcgHdjIoAj0L/kbLz/ALb/APoYoA66gAoAKACgAoAKACgAoA//0vf6ACgAoAKACgAoAKACgDkfBX/H/e/7q/8Aow0AYOof8hC6/wCu0n/oZoA7fwz5P9iW3lY6HzMf39x3Z96AE8U+T/Ylx5mM/L5ef7+4bcfrQBwNAClHCCQqQjEqrdiRjI/DIoASgDo/BH/H9c/9cl/9DoAfoX/I2Xn/AG3/APQxQB11ABQAUAFABQAUAFABQB//0/f6ACgAoAKACgAoAKACgDkfBX/H/e/7q/8Aow0AYGof8hC6/wCu0n/oZoAk0/Vr/Ty32WXarcsjAMpPrg9/cUAGoarf37KbqXcF+6gG1R7gDv70AUzwM0AdnJoO/wAMR2wX/So189f+uh+Zl/EHFAHGUAdJ4I/4/rn/AK5D/wBDoAfoX/I2Xn/bf/0MUAddQAUAFABQAUAFABQAUAf/1Pf6ACgAoAKACgAoAKACgDkfBX/H9e/7q/8Aow0AYGo/8hC6/wCu0n/oZoAgoAt2Wkale4NtAzof+Wh+VP8Avo4H5UAb1h4LcOkl5OMKQxijGc4OcFjjj6CgDq6APOdcs/smq3EIGELb4/8Adf5h+XIoA1fBH/H9c/8AXIf+h0AP0L/kbLz/ALb/APoYoA66gAoAKACgAoAKACgAoA//1ff6ACgAoAKACgAoAKACgDkfBX/H/e/7q/8Aow0AYOo/8hC6/wCu0n/oZoA0/D3h579xcXAK2an6GQjsPb1P4CgDt0RERURQqKMKo4AA6ACgB1ABQBzvizRprpEvLdd0kKlZIx95kznI9SvPFAFDwR/x/XP/AFyH/odAD9C/5Gy8/wC2/wD6GKAOuoAKACgAoAKACgAoAKAP/9b3+gAoAKACgAoAKACgAoA4DRNai0u5uZHjMolG0BWAxhie9AGv/wAJvZf8+j/99JQAv/Cc2g/5dX/77SgA/wCE5tf+fV/++0oAP+E5tf8An1f/AL7SgA/4Tm1/59X/AO+0oAP+E5tf+fV/++0oAB44sx0tHH/A0oAp+GZ1uPEc86jaJVmcLkEgMwOOPrQB2dABQAUAFABQAUAFABQB/9f3+gAoAKACgAoAKACgAoAg+wWP/PvF/wB8L/hQAn2Cx/59ov8Avhf8KAD7BY/8+0X/AHwv+FAB9gsf+faL/vhf8KAD7BY/8+0X/fC/4UAH2Cx/59ov++F/woAPsFj/AM+0X/fC/wCFAB9gsf8An2i/74X/AAoAfHa20Tbo4URum5VAOPqBQBLQAUAFABQAUAFABQAUAf/Q9/oAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA/9H3+gAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD/0vf6ACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP/T9/oAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA/9T3+gAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD/1ff6ACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP/W9/oAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA/9f3+gAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD/2Q=="},,,,,,,function(e,t,a){e.exports=a(16)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),A=a.n(n),c=a(7),o=a.n(c),r=(a(14),a(1)),g=(a(15),function(e){return Promise.reject({code:"NETWORK-ERROR"})}),s=function(e){return Promise.reject({status:e.status,code:e.message})},i=function(){return fetch("/session",{method:"GET"}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))},l=function(e){return fetch("/users/".concat(e,"/categories"),{method:"GET"}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))},C=function(e){var t=e.username,a=e.categoryId;return fetch("/users/".concat(t,"/categories/").concat(a),{method:"GET"}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))},I=function(e){var t=e.username,a=e.category;return fetch("/users/".concat(t,"/categories"),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({category:a})}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))},u=function(e){return fetch("/collectionLists?".concat(e),{method:"GET"}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))},m=function(e){return fetch("/collectionLists/".concat(e),{method:"GET"}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))},E=function(e){var t=e.username,a=e.list;return fetch("/collectionLists",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:t,list:a})}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))},d=Object.freeze({INDEX:"INDEX",SINGLE_CAT:"CAT_VIEW",SINGLE_LIST:"ITEMS_VIEW",SINGLE_ITEM:"SINGLE_ITEM",POST_ITEM:"POST_ITEM",EDIT_CAT:"EDIT_CAT",EDIT_LIST:"EDIT_LIST",EDIT_ITEM:"EDIT_ITEM",USER_VIEW:"USER_VIEW",USER_SELF:"USER_SELF",USER_SETTING:"USER_SETTING"}),f=function(e){var t=e.className,a=e.children,n=e.onClick;return A.a.createElement("div",{className:t,onClick:n},a)},v=function(e){var t=e.mainTitle,a=e.subTitle,n=e.setPageView;return A.a.createElement("div",{className:"page-title"},A.a.createElement(f,{className:"main-title",onClick:function(){n({reqData:null,view:d.INDEX})}},t),A.a.createElement(f,{className:"sub-title"},a))},b=function(e){var t=e.text,a=e.onClick;return A.a.createElement("button",{className:"login-button",onClick:a},t)},h=function(e){var t=e.children,a=e.userState,n=e.setPageView;return A.a.createElement("button",{className:"my-page-button",onClick:function(){var e={username:a.username};n({reqData:e,view:d.USER_SELF})}},A.a.createElement("i",{className:"material-icons"},"person"),t)},N=function(e){var t=e.children;return A.a.createElement("div",{className:"page-info"},t)},w=function(e){var t,a=e.userState,n=e.onLogout,c=e.setPageView,o=e.setLoginDialog;return t=a?a.isLoggedIn&&a.username?A.a.createElement("div",null,A.a.createElement("span",{className:"welcome-text"},"Welcome!"),A.a.createElement("span",{className:"topmenu-username"},a.username),A.a.createElement(h,{userState:a,setPageView:c},"My Page"),A.a.createElement("button",{onClick:function(){fetch("/session",{method:"DELETE"}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)})).then((function(){n()})).catch((function(e){n()})),c({reqData:null,view:d.INDEX})},className:"log-out-button"},"Log out")):A.a.createElement("div",null,A.a.createElement(b,{text:"Log in",onClick:function(){return o(!0)}})):A.a.createElement(N,null,"loading..."),A.a.createElement("div",{className:"top-menu"},t)},O=function(e){var t=e.userState,a=e.onLogout,n=e.setPageView,c=e.setLoginDialog;return A.a.createElement("div",{className:"header"},A.a.createElement(v,{mainTitle:"Our Collections",subTitle:"organize, track and share your collection",setPageView:n}),A.a.createElement(w,{userState:t,onLogout:a,setPageView:n,setLoginDialog:c}))},S=function(e){var t=e.children,a=e.setPageView;return A.a.createElement("button",{className:"home-page-button",onClick:function(){a({reqData:null,view:d.INDEX})}},A.a.createElement("i",{className:"material-icons"},"home"),t)},D={DEFAULT:"Oh no!  Something went wrong, please try again",NETWORK_ERROR:"There was a problem reaching your network, please try again",NO_VALID_SESSION:"You must be logged in to view this content. Please log in or refresh the page.",USERNAME_REQUIRED:"Username is required",USERNAME_DENIED:"You can't use invalid character in username. Only numbers, letters, hyphen and underscore are allowed. Length should be 2-20",USER_UNAUTHORIZED:"You are not permitted to view this content. Please refresh the page.",ACTION_NOT_PERMITTED:"You are not permitted to perform this action. Please refresh the page.",DUPLICATE_CAT_NAME:"Category already exists. Please change another name",DUPLICATE_LIST_NAME:"List in this category already exists. Please change another name",DUPLICATE_ITEM_NAME:"Item in this list already exists. Please change another name",CAT_NAME_DENIED:"You can't use invalid character in category name. Only numbers, letters, hyphen and underscore are allowed. Length should be 2-20",LIST_NAME_DENIED:"The length of list name should between 2-100",ITEM_NAME_DENIED:"The length of item name should between 2-100",NO_SUCH_ITEM:"The item does not exist. Please refresh the page",NO_SUCH_CAT:"The category does not exist. Please refresh the page.",NO_SUCH_LIST:"The list does not exist. Please refresh the page or try other operations.",FAILED_TO_DELETE_CAT:"failed to delete a category",ATTEMPT_TO_DELETE_DEFAULT:"You can't delete the default category",FORBIDDEN:"forbidden action",INPUT_REQUIRED:"You must complete the required field",NO_LIST_IN_CAT:"There is no list in this category. Add a new list or change another category",TOO_MUCH_INPUT:"You can only add 2000 letters in the description",TOO_MUCH_INPUT_LIST:"You can only add 500 letters in the description",LARGER_THAN_5:"You can't upload images larger than 5M",CLEAR:""},j=function(e){var t=e.onLogin,a=e.openDialog,c=e.setDialog,o=e.setPageView,i=Object(n.useState)(""),l=Object(r.a)(i,2),C=l[0],u=l[1],m=Object(n.useState)(""),f=Object(r.a)(m,2),v=f[0],h=f[1];return A.a.createElement("div",{className:"login-form"},A.a.createElement("div",{className:"dialog-title"},"Log In"),A.a.createElement("p",{className:"dialog-prompt"},"log in to view more and create your own collections"),A.a.createElement("p",{className:"error"},v),A.a.createElement("div",null,A.a.createElement("label",null,"username: "),A.a.createElement("div",{className:"login-input-group"},A.a.createElement("div",{className:"log-in-icon-block"},A.a.createElement("i",{className:"material-icons log-in-icon"},"person")),A.a.createElement("input",{className:"login-input",value:C,onChange:function(e){return u(e.target.value.trim())}})),A.a.createElement(b,{text:"Log in",onClick:function(){C?(h(""),function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))}(C).then((function(){(function(e){return I({username:e,category:{categoryName:"default"}}).then((function(t){var a=t.data.categoryId;return E({username:e,list:{listName:"Default",description:"",categoryId:a}})})).catch((function(){}))})(C).then((function(){a&&c(!1),o({reqData:{username:C},view:d.USER_SELF}),h(""),t(C)}))})).catch((function(e){h(D[e.code||"DEFAULT"]),u("")}))):h(D.USERNAME_REQUIRED)}})))},p=function(e){var t=e.text,a=e.onClick;return A.a.createElement("button",{className:"create-button-side",onClick:a},A.a.createElement("i",{className:"material-icons"},"add"),t)},T=function(e){var t=e.show,a=e.setShowDialog,n=e.children;return A.a.createElement("div",{className:"modal "+(t?"":"hidden")},A.a.createElement("div",{className:"modal-content"},A.a.createElement("i",{className:"material-icons quit-icon",onClick:function(){a(!1)}},"clear"),n))},y=function(e){var t=e.text,a=e.onClick;return A.a.createElement("button",{className:"create-button-dialog",onClick:a},t)},L=function(e){var t=e.text,a=e.onClick;return A.a.createElement("button",{className:"cancel-button-dialog",onClick:a},t)},K=function(){return A.a.createElement("span",{className:"mandatory-icon"},"*")},P=function(e){var t=e.userState,a=e.setDialog,c=e.setPageView,o=(e.updateMyPage,e.onLogout,Object(n.useState)("")),g=Object(r.a)(o,2),s=g[0],l=g[1],C=Object(n.useState)(""),u=Object(r.a)(C,2),m=u[0],E=u[1];Object(n.useEffect)((function(){l(""),i().then((function(e){e.data.username!==t.username&&l(D.ACTION_NOT_PERMITTED)})).catch((function(e){l(D[e.code||"DEFAULT"])}))}),[]);var f=A.a.createElement("div",{className:"dialog-buttons"},A.a.createElement(y,{text:"create",onClick:function(){m&&m.trim()?(l(""),I({username:t.username,category:{categoryName:m}}).then((function(){var e={username:t.username};c({reqData:e,view:d.USER_SELF}),a(!1)})).catch((function(e){l(D[e.code||"DEFAULT"])}))):l(D.INPUT_REQUIRED)}}),A.a.createElement(L,{text:"cancel",onClick:function(){return a(!1)}}));return A.a.createElement("div",{className:"add-dialog-form"},A.a.createElement("div",{className:"dialog-title"},"Create New Category"),A.a.createElement("p",{className:"dialog-prompt"},"This is a group of your collection lists!"),A.a.createElement("p",{className:"error"},s),A.a.createElement("div",null,A.a.createElement(K,null),A.a.createElement("label",null,"category name: "),A.a.createElement("input",{value:m,onChange:function(e){return E(e.target.value)}}),f))},U={sortBy:function(e){var t=e.array,a=e.sortby,n=e.ascend,A=void 0!==n&&n;if(Array.isArray(t))switch(a){case"categoryName":case"listName":case"itemName":case"maker":return A?t.sort((function(e,t){return e[a].toLowerCase().localeCompare(t[a].toLowerCase())})):t.sort((function(e,t){return t[a].toLowerCase().localeCompare(e[a].toLowerCase())}));case"updated":case"created":case"listCount":case"itemCount":case"releaseDate":case"collectedDate":case"rate":case"price":return A?t.sort((function(e,t){return e[a]-t[a]})):t.sort((function(e,t){return t[a]-e[a]}));default:return t}}},k=function(e){var t=e.username,a=e.categoryId,c=e.setCategoryId,o=e.onError,g=Object(n.useState)(null),s=Object(r.a)(g,2),i=s[0],C=s[1];Object(n.useEffect)((function(){l(t).then((function(e){var t=U.sortBy({array:e.data,sortby:"categoryName",ascend:!0});C(t)})).catch((function(e){o(e)}))}),[t],o),Object(n.useEffect)((function(){!a&&i&&c(i[0].categoryId)}),[i]);var I;if(i){var u=i.map((function(e){return A.a.createElement("option",{key:e.categoryId,value:e.categoryId},e.categoryName)}));I=A.a.createElement("select",{className:"cat-select",value:a,onChange:function(e){c(e.target.value)}},u)}else I=A.a.createElement("select",null);return A.a.createElement("div",{className:"cat-selector"},I)},B=function(e){var t=e.userState,a=e.setDialog,c=e.setPageView,o=(e.updateMyPage,e.onLogout,Object(n.useState)("")),g=Object(r.a)(o,2),s=g[0],l=g[1],C=Object(n.useState)(""),I=Object(r.a)(C,2),u=I[0],m=I[1],f=Object(n.useState)(""),v=Object(r.a)(f,2),b=v[0],h=v[1],N=Object(n.useState)(""),w=Object(r.a)(N,2),O=w[0],S=w[1];Object(n.useEffect)((function(){l(""),i().then((function(e){console.log("login:"+e.data.username),console.log("userState:"+t.username),e.data.username!==t.username&&l(D.ACTION_NOT_PERMITTED)})).catch((function(e){l(D[e.code||"DEFAULT"])}))}),[]);var j=A.a.createElement("div",{className:"dialog-buttons"},A.a.createElement(y,{text:"create",onClick:function(){u&&u.trim()?(l(""),E({username:t.username,list:{listName:u,description:b,categoryId:O}}).then((function(){var e={username:t.username};c({reqData:e,view:d.USER_SELF}),a(!1)})).catch((function(e){l(D[e.code||"DEFAULT"])}))):l(D.INPUT_REQUIRED)}}),A.a.createElement(L,{text:"cancel",onClick:function(){return a(!1)}}));return A.a.createElement("div",{className:"add-dialog-form"},A.a.createElement("div",{className:"dialog-title"},"Create New List"),A.a.createElement("p",{className:"dialog-prompt"},"This is a list of your collection items!"),A.a.createElement("p",{className:"error"},s),A.a.createElement("div",null,A.a.createElement("label",{className:"form-label"},A.a.createElement(K,null),"list name: "),A.a.createElement("input",{className:"new-list-input",onChange:function(e){return m(e.target.value)}}),A.a.createElement("label",{className:"form-label"},"category: "),A.a.createElement(k,{username:t.username,setCategoryId:S,onError:function(e){l(D[e.code||"DEFAULT"])}}),A.a.createElement("label",{className:"form-label"},"description: "),A.a.createElement("textarea",{rows:"3",cols:"35",value:b,onChange:function(e){return h(e.target.value)}}),j))},Q=function(e){var t,a,c=e.userState,o=e.setPageView,g=e.onLogout,s=Object(n.useState)(!1),i=Object(r.a)(s,2),l=i[0],C=i[1],I=Object(n.useState)(!1),u=Object(r.a)(I,2),m=u[0],E=u[1];l&&(t=A.a.createElement(T,{show:l,setShowDialog:C},A.a.createElement(P,{userState:c,setDialog:C,setPageView:o,onLogout:g}))),m&&(a=A.a.createElement(T,{show:m,setShowDialog:E},A.a.createElement(B,{userState:c,setDialog:E,setPageView:o,onLogout:g})));return A.a.createElement("div",{className:"sidebar-module-top"},A.a.createElement(p,{text:"New Category",onClick:function(){return C(!0)}}),A.a.createElement(p,{text:"New List",onClick:function(){return E(!0)}}),A.a.createElement(p,{text:"New Item",onClick:function(){o({reqData:null,view:d.POST_ITEM})}}),A.a.createElement(h,{userState:c,setPageView:o},"My Page"),t,a)},x=function(e){var t=e.userState,a=e.pageView,c=e.setPageView,o=Object(n.useState)(null),g=Object(r.a)(o,2),s=g[0],i=g[1],C=Object(n.useState)(!1),I=Object(r.a)(C,2),u=I[0],m=I[1];Object(n.useEffect)((function(){if(a.reqData){var e=a.reqData.username;m(t.username===e),l(e).then((function(e){i(U.sortBy({array:e.data,sortby:"categoryName",ascend:!0}))})).catch((function(e){}))}}),[a,t]);var E,v,b;return s&&(E=s.map((function(e){var t=e.username,a=e.categoryId,n=e.categoryName,o=e.listCount;return A.a.createElement("li",{key:a,className:"link",onClick:function(){return function(e){var t=e.username,a=e.categoryId,n=e.categoryName;c({reqData:{username:t,categoryId:a,categoryName:n},view:d.SINGLE_CAT})}({username:t,categoryId:a,categoryName:n})}},n,"(",o,")")}))),u&&(v=A.a.createElement("li",{className:"edit-cat link",onClick:function(){var e={username:t.username};c({reqData:e,view:d.EDIT_CAT})}},"Edit Category")),s&&(b=A.a.createElement("div",{className:"sidemenu-block"},A.a.createElement(f,{className:"sidemenu-title"},a.reqData.username,"'s Categories"),A.a.createElement("ul",{className:"side-menu-list"},E,v))),A.a.createElement("div",null,A.a.createElement("div",{className:"sidebar-module"},b))},R=function(e){var t,a,n,c=e.userState,o=e.onLogin,r=e.pageView,g=e.setPageView,s=e.onLogout;return t=c?c.isLoggedIn?A.a.createElement(Q,{userState:c,setPageView:g,onLogout:s}):A.a.createElement(j,{onLogin:o,setPageView:g}):A.a.createElement(N,null,"loading..."),r.view!==d.USER_VIEW&&r.view!==d.USER_SELF||(a=A.a.createElement(x,{userState:c,pageView:r,setPageView:g})),r.view!==d.INDEX&&(n=A.a.createElement("div",{className:"sidebar-module"},A.a.createElement(S,{setPageView:g},"Home"))),A.a.createElement("div",{className:"side-bar"},t,n,a)},M=function(e){var t=e.setKeywords,a=Object(n.useState)(""),c=Object(r.a)(a,2),o=c[0],g=c[1];return A.a.createElement("div",{className:"search-bar"},A.a.createElement("input",{className:"search-bar-input",placeholder:"search collections",onChange:function(e){return g(e.target.value)},onKeyPress:function(e){13===(e.keyCode||e.which)&&t(o)}}),A.a.createElement("i",{className:"material-icons search-icon",onClick:function(){return t(o)}},"search"))},_=a(5),V=function(e){var t=e.list,a=e.setPageView,c=e.onError,o=Object(n.useState)(""),g=Object(r.a)(o,2),s=g[0],i=g[1];Object(n.useEffect)((function(){C({username:t.username,categoryId:t.categoryId}).then((function(e){i(e.data.categoryName)})).catch((function(e){c(e)}))}));var l;if(t){var I=Object.values(t.items);if(I.length)U.sortBy({array:I,sortby:"updated",ascend:!1}),l=I.slice(0,6).map((function(e){return A.a.createElement("li",{key:e.itemId},A.a.createElement("img",{className:"listview-thumbnail",alt:e.itemName,src:e.img,onClick:function(){return function(e){var n={listId:t.listId,itemId:e};a({reqData:n,view:d.SINGLE_ITEM})}(e.itemId)}}))}))}var u=new Date(t.updated).toLocaleString("en-US"),m=A.a.createElement("div",null,A.a.createElement("div",{className:"list-title link",onClick:function(){var e={username:t.username,listId:t.listId};a({reqData:e,view:d.SINGLE_LIST})}},t.listName),A.a.createElement("div",{className:"list-info-text-inline"},"category:",A.a.createElement("span",{className:"list-info-goto link",onClick:function(){var e={username:t.username,categoryId:t.categoryId,categoryName:s};a({reqData:e,view:d.SINGLE_CAT})}},s)),A.a.createElement("div",{className:"list-info-text-inline"},"from:",A.a.createElement("span",{className:"list-info-goto link",onClick:function(){var e={username:t.username};a({reqData:e,view:d.USER_VIEW})}},t.username)),A.a.createElement("ul",{className:"listview-img-group"},l),A.a.createElement("div",{className:"list-info-text"},"Total item: ",A.a.createElement("span",{className:"item-count-info"},t.itemCount)),A.a.createElement("div",{className:"list-info-text"},"Last updated: ",u));return A.a.createElement("li",{className:"list-tile"},m)},G=function(e){var t,a,c=e.sortby,o=e.isAscend,g=e.filter,s=e.listData,i=e.setPageView,l=e.onError,C=Object(n.useState)(null),I=Object(r.a)(C,2),u=I[0],m=I[1];return Object(n.useEffect)((function(){if(s){var e=s;g&&(e=s.filter((function(e){return e.listName.toLowerCase().includes(g.toLowerCase())}))),c&&(U.sortBy({array:e,sortby:c,ascend:o}),e=Object(_.a)(e)),m(e)}}),[s,g,c,o]),u&&(t=u.map((function(e){return A.a.createElement(V,{key:e.listId,list:e,setPageView:i,onError:l})}))),g&&!u.length&&(a=A.a.createElement(N,null,"no results found. Take another pass with a different search term")),A.a.createElement("div",{className:"lists-display"},A.a.createElement("ul",null," ",t," "),a)},F=function(e){var t=e.setPageView,a=Object(n.useState)(""),c=Object(r.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(null),C=Object(r.a)(l,2),I=C[0],u=C[1],m=Object(n.useState)(""),E=Object(r.a)(m,2),d=E[0],f=E[1];Object(n.useEffect)((function(){i(""),fetch("/collectionLists",{method:"GET"}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)})).then((function(e){u(e.data)})).catch((function(e){i(D[e.code||"DEFAULT"])}))}),[]);var v,b;return I&&(v=A.a.createElement(G,{sortby:"updated",isAscend:!1,listData:I,filter:d,setPageView:t,onError:function(e){i(D[e.code||"DEFAULT"])}})),b=A.a.createElement("div",null,A.a.createElement("div",{className:(o?"":"hidden")+" error-box"},A.a.createElement("div",{className:"error-title"},"Sorry!"),o)),A.a.createElement("div",null,b,A.a.createElement(M,{setKeywords:f}),v)},H=function(e){var t=e.setSortby,a=e.setIsAscend,c=Object(n.useState)('{ "sortby":"updated", "ascend":false }'),o=Object(r.a)(c,2),g=o[0],s=o[1];Object(n.useEffect)((function(){var e=JSON.parse(g);t(e.sortby),a(e.ascend)}),[g,t,a]);return A.a.createElement("div",{className:"sort-selecter"},A.a.createElement("label",null,"Sort by: "),A.a.createElement("select",{value:g,onChange:function(e){s(e.target.value)}},A.a.createElement("option",{value:'{ "sortby":"listName", "ascend":true }'},"list name ascending"),A.a.createElement("option",{value:'{ "sortby":"listName", "ascend":false }'},"list name descending"),A.a.createElement("option",{value:'{ "sortby":"updated", "ascend":false }'},"last updated"),A.a.createElement("option",{value:'{ "sortby":"created", "ascend":false }'},"new created"),A.a.createElement("option",{value:'{ "sortby":"itemCount", "ascend":false }'},"total item")))},q=function(e){var t=e.userState,a=e.pageView,c=e.setPageView,o=e.onLogout,g=Object(n.useState)(""),s=Object(r.a)(g,2),i=s[0],l=s[1],C=Object(n.useState)(!1),I=Object(r.a)(C,2),m=I[0],E=I[1],d=Object(n.useState)(null),v=Object(r.a)(d,2),b=v[0],h=v[1],N=Object(n.useState)("updated"),w=Object(r.a)(N,2),O=w[0],S=w[1],j=Object(n.useState)(!1),p=Object(r.a)(j,2),T=p[0],y=p[1];Object(n.useEffect)((function(){if(a.reqData){var e=a.reqData.username,t="username=".concat(e);l(""),u(t).then((function(e){h(e.data)})).catch((function(e){l(D[e.code||"DEFAULT"]),401===e.status&&o()}))}}),[a]),Object(n.useEffect)((function(){a.reqData&&E(t.username===a.reqData.username)}),[a,t]);var L;m&&(L=A.a.createElement(H,{setSortby:S,setIsAscend:y}));var K,P,U=A.a.createElement(G,{sortby:O,isAscend:T,listData:b,setPageView:c,onError:function(e){l(D[e.code||"DEFAULT"])}});return b&&(K=A.a.createElement("div",null,A.a.createElement(f,{className:"view-title"},a.reqData.username,"'s Collections"),L,U)),P=A.a.createElement("div",null,A.a.createElement("div",{className:(i?"":"hidden")+" error-box"},A.a.createElement("div",{className:"error-title"},"Sorry!"),i)),A.a.createElement("div",null,P,K)},X=function(e){e.userState;var t=e.pageView,a=e.setPageView,c=e.onLogout,o=Object(n.useState)(""),g=Object(r.a)(o,2),s=g[0],i=g[1],l=Object(n.useState)(null),C=Object(r.a)(l,2),I=C[0],m=C[1],E=t.reqData.username,d=t.reqData.categoryName;Object(n.useEffect)((function(){var e=t.reqData.categoryId,a="categoryId=".concat(e);i(""),u(a).then((function(e){m(e.data)})).catch((function(e){i(D[e.code||"DEFAULT"]),401===e.status&&c()}))}),[t]);var v,b;return I&&(v=A.a.createElement("div",null,A.a.createElement(f,{className:"view-title"},E,"'s ",d," Collections"),A.a.createElement(G,{listData:I,setPageView:a,onError:function(e){i(D[e.code||"DEFAULT"])}}))),b=A.a.createElement("div",null,A.a.createElement("div",{className:(s?"":"hidden")+" error-box"},A.a.createElement("div",{className:"error-title"},"Sorry!"),s)),A.a.createElement("div",null,b,v)},Z=a(8),J=function(e){var t=e.userState,a=(e.isOwner,e.list),c=e.isEditMode,o=e.setIsEditMode,i=e.setPageView,l=e.setUpdateList,I=e.onError,u=a.categoryId,m=Object(n.useState)(a.listName),E=Object(r.a)(m,2),v=E[0],b=E[1],h=Object(n.useState)(a.categoryId),N=Object(r.a)(h,2),w=N[0],O=N[1],S=Object(n.useState)(""),D=Object(r.a)(S,2),j=D[0],p=D[1],T=Object(n.useState)(a.description),L=Object(r.a)(T,2),K=L[0],P=L[1];Object(n.useEffect)((function(){C({username:a.username,categoryId:a.categoryId}).then((function(e){p(e.data.categoryName)})).catch((function(e){console.log("set error for listInfo"),I(e)}))}),[a,I]);var U=A.a.createElement("div",null,A.a.createElement(f,{className:"view-title list-detail-title"},a.listName),A.a.createElement("div",{className:"list-info-text-inline"},"category:",A.a.createElement("span",{className:"list-info-goto link",onClick:function(){var e={username:a.username,categoryId:a.categoryId,categoryName:j};i({reqData:e,view:d.SINGLE_CAT})}},j)),A.a.createElement("div",{className:"list-info-text-inline"},"from:",A.a.createElement("span",{className:"list-info-goto link",onClick:function(){var e={username:a.username};i({reqData:e,view:d.USER_VIEW})}},a.username)),A.a.createElement("div",{className:"list-description"},a.description)),B=A.a.createElement("div",null,A.a.createElement("input",{value:v,className:"list-detail-title",onChange:function(e){return b(e.target.value)}}),A.a.createElement(k,{username:t.username,categoryId:w,setCategoryId:O,onError:I}),A.a.createElement("textarea",{className:"list-description-textarea",value:K,onChange:function(e){return P(e.target.value)}}),A.a.createElement(y,{text:"submit",onClick:function(){if(v&&v.trim()){var e=t.username,n=Object(Z.a)({},a,{listName:v,description:K,categoryId:w});(function(e){var t=e.username,a=e.oldCatId,n=e.listId,A=e.list;return fetch("/collectionLists/".concat(n),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:t,oldCatId:a,list:A})}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))})({username:e,oldCatId:u,listId:a.listId,list:n}).then((function(){o(!1),l()})).catch((function(e){console.log("set error in replacelist"),I(e)}))}else I({code:"INPUT_REQUIRED"})}}),A.a.createElement(y,{text:"cancel",onClick:function(){I({code:"CLEAR"}),o(!1)}}));return A.a.createElement("div",{className:"list-info"},c?B:U)},Y=function(e){var t=e.text,a=e.onClick;return A.a.createElement("button",{className:"edit-button",onClick:a},A.a.createElement("i",{className:"material-icons"},"edit"),t)},z=function(e){var t=e.text,a=e.onClick;return A.a.createElement("button",{className:"create-button-main",onClick:a},A.a.createElement("i",{className:"material-icons"},"post_add"),t)},W=function(e){var t=e.userState,a=e.list,c=e.isDisabled,o=e.isDeleteMode,i=e.setIsEditMode,l=e.setIsDeleteMode,C=e.setPageView,I=e.onError,u=Object(n.useState)("Delete Items"),m=Object(r.a)(u,2),E=m[0],f=m[1];Object(n.useEffect)((function(){f(c?"Delete Items":o?"Cancel":"Delete Items")}),[o,c]);var v=function(){var e={username:t.username};C({reqData:e,view:d.USER_SELF})},b=A.a.createElement(Y,{text:"Edit list",onClick:function(){return i(!0)}}),h=A.a.createElement(z,{text:"Add new item",onClick:function(){var e={listId:a.listId,categoryId:a.categoryId};C({reqData:e,view:d.POST_ITEM})}}),N=A.a.createElement("button",{className:"list-delete-button",onClick:function(){(function(e){var t=e.username,a=e.listId;return fetch("/collectionLists/".concat(a),{method:"DELETE",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:t})}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))})({username:t.username,listId:a.listId}).then((function(){v()})).catch((function(e){I(e),v()}))}},A.a.createElement("i",{className:"material-icons delete-button-icon"},"delete"),"Delete List"),w=A.a.createElement("button",{className:"list-delete-button",onClick:function(){l(!o)},disabled:c},A.a.createElement("i",{className:"material-icons delete-button-icon"},"delete"),E);return A.a.createElement("div",{className:"list-menu"},A.a.createElement("div",{className:"list-menu-module"},b,h),A.a.createElement("div",{className:"list-menu-module"},N,w))},$=a(2),ee=a.n($),te=function(e){var t,a=e.userState,n=e.item,c=e.isDeleteMode,o=e.setUpdateList,r=e.setPageView,i=e.onError,l=n.listId,C=n.itemId,I=n.img,u=n.itemName,m=function(){r({reqData:{listId:l,itemId:C},view:d.SINGLE_ITEM})};return t=I?A.a.createElement("img",{className:"thumbnail",alt:u,src:I,onClick:m}):A.a.createElement("img",{className:"thumbnail",alt:"placeholder",src:ee.a}),A.a.createElement("li",{className:"thumbnail-item"},A.a.createElement("div",{className:"item-pic"},t,A.a.createElement("i",{className:(c?"":"hidden")+" material-icons item-delete-icon",onClick:function(){(function(e){var t=e.username,a=e.listId,n=e.itemId;return fetch("/collectionLists/".concat(a,"/items/").concat(n),{method:"DELETE",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:t})}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))})({username:a.username,listId:l,itemId:C}).then((function(){o()})).catch((function(e){i(e)}))}},"clear")),A.a.createElement("div",{className:"thumbnail-item-title link",onClick:m},u))},ae=function(e){var t,a,c=e.userState,o=e.itemData,g=e.isDeleteMode,s=e.setIsDisabled,i=e.setPageView,l=e.setUpdateList,C=e.onError,I=Object(n.useState)(null),u=Object(r.a)(I,2),m=u[0],E=u[1],d=Object(n.useState)("updated"),f=Object(r.a)(d,2),v=f[0],b=(f[1],Object(n.useState)(!1)),h=Object(r.a)(b,2),w=h[0];h[1];return Object(n.useEffect)((function(){U.sortBy({array:o,sortby:v,ascend:w}),E(Object(_.a)(o))}),[v,w,o]),Object(n.useEffect)((function(){m&&m.length?s(!1):s(!0)}),[m,s]),m&&(t=m.map((function(e){return A.a.createElement(te,{key:e.itemId,userState:c,item:e,isDeleteMode:g,setUpdateList:l,setPageView:i,onError:C})})),m.length||(a=A.a.createElement(N,null,"There are no items yet"))),A.a.createElement("div",{className:"item-group"},a,A.a.createElement("ul",{className:"items-display"},t))},ne=function(e){var t=e.userState,a=e.pageView,c=e.setPageView,o=Object(n.useState)(""),g=Object(r.a)(o,2),s=g[0],i=g[1],l=Object(n.useState)(null),C=Object(r.a)(l,2),I=C[0],u=C[1],E=Object(n.useState)(!1),d=Object(r.a)(E,2),f=d[0],v=d[1],b=Object(n.useState)(!1),h=Object(r.a)(b,2),N=h[0],w=h[1],O=Object(n.useState)(!1),S=Object(r.a)(O,2),j=S[0],p=S[1],T=Object(n.useState)(!1),y=Object(r.a)(T,2),L=y[0],K=y[1],P=Object(n.useState)(!1),U=Object(r.a)(P,2),k=U[0],B=U[1];Object(n.useEffect)((function(){v(t.username===a.reqData.username),i(""),m(a.reqData.listId).then((function(e){u(e.data)})).catch((function(e){i(D[e.code||"DEFAULT"])}))}),[a,t,N]);var Q,x,R,M,_=function(e){i(D[e.code||"DEFAULT"])};if(I&&(Q=A.a.createElement(J,{userState:t,isOwner:f,list:I,isEditMode:j,setIsEditMode:p,setUpdateList:w,setPageView:c,onError:_})),I&&I.items){var V=Object.values(I.items);x=A.a.createElement(ae,{userState:t,isOwner:f,listId:I.listId,itemData:V,isDeleteMode:k,setIsDisabled:K,setPageView:c,setUpdateList:function(){w(!N)},onError:_})}return f&&(R=A.a.createElement(W,{userState:t,list:I,isDisabled:L,isDeleteMode:k,setIsEditMode:p,setIsDeleteMode:B,setPageView:c,onError:_})),M=A.a.createElement("div",null,A.a.createElement("div",{className:(s?"":"hidden")+" error-box"},A.a.createElement("div",{className:"error-title"},"Sorry!"),s)),A.a.createElement("div",null,M,Q,R,x)},Ae=function(e){var t=e.userState,a=e.pageView,c=e.setPageView,o=e.onLogout,i=Object(n.useState)(""),l=Object(r.a)(i,2),C=l[0],I=l[1],u=Object(n.useState)(null),E=Object(r.a)(u,2),f=E[0],v=E[1],b=Object(n.useState)(""),h=Object(r.a)(b,2),N=h[0],w=h[1],O=Object(n.useState)(""),S=Object(r.a)(O,2),j=S[0],p=S[1],T=Object(n.useState)(!1),y=Object(r.a)(T,2),L=y[0],K=y[1];Object(n.useEffect)((function(){var e=a.reqData.listId,t=a.reqData.itemId;I(""),function(e){var t=e.listId,a=e.itemId;return fetch("/collectionLists/".concat(t,"/items/").concat(a),{method:"GET"}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))}({listId:e,itemId:t}).then((function(t){v(t.data),B(e)})).catch((function(e){I(D[e.code||"DEFAULT"]),401===e.status&&o()}))}),[a]),Object(n.useEffect)((function(){j&&K(t.username===j)}),[j]);var P,U,k,B=function(e){return m(e).then((function(e){w(e.data.listName),p(e.data.username)})).catch((function(e){I(D[e.code||"DEFAULT"])}))};return f&&(P=A.a.createElement("div",null,f.img?A.a.createElement("img",{className:"item-img",alt:f.itemName,src:f.img}):A.a.createElement("img",{className:"item-img",alt:"placeholder",src:ee.a}),A.a.createElement("div",{className:"item-title"},f.itemName),A.a.createElement("div",{className:"item-info-text link",onClick:function(){var e={username:j,listId:f.listId};c({reqData:e,view:d.SINGLE_LIST})}},N),A.a.createElement("div",{className:"item-info-text link",onClick:function(){c({reqData:{username:j},view:d.USER_VIEW})}},"from: ",j),A.a.createElement("div",{className:"item-description"},f.description))),L&&(U=A.a.createElement("div",{className:"item-edit-button"},A.a.createElement(Y,{text:"Edit",onClick:function(){c({reqData:null,view:d.EDIT_ITEM})}}))),k=A.a.createElement("div",null,A.a.createElement("div",{className:(C?"":"hidden")+" error-box"},A.a.createElement("div",{className:"error-title"},"Sorry!"),C)),A.a.createElement("div",null,k,A.a.createElement("div",null,P),U)},ce=function(e){var t=e.lists,a=e.listId,c=e.setListId,o=e.onError,g=Object(n.useState)(""),s=Object(r.a)(g,2),i=s[0],l=s[1];Object(n.useEffect)((function(){o({code:"CLEAR"}),t&&t.length?i||l(t[0].listId):(l(""),o({code:"NO_LIST_IN_CAT"}))}),[t]),Object(n.useEffect)((function(){a&&l(a)}),[]),Object(n.useEffect)((function(){c(i)}),[c,i]);var C;if(t){var I=t.map((function(e){return A.a.createElement("option",{key:e.listId,value:e.listId},e.listName)}));C=A.a.createElement("select",{className:"list-select",value:i,onChange:function(e){l(e.target.value)}},I)}return A.a.createElement("div",{className:"list-selector"},C)},oe=function(e){var t,a=e.userState,c=e.categoryId,o=e.listId,g=e.setCategoryId,s=e.setListId,i=e.onError,l=Object(n.useState)(""),C=Object(r.a)(l,2),I=C[0],m=C[1],E=Object(n.useState)(null),d=Object(r.a)(E,2),f=d[0],v=d[1];return Object(n.useEffect)((function(){if(c){var e="categoryId=".concat(c);u(e).then((function(e){v(e.data)})).catch((function(e){i(e)}))}}),[c,i]),t=f?A.a.createElement(ce,{lists:f,listId:o,setListId:s,onError:function(e){m(D[e.code||"DEFAULT"])}}):A.a.createElement("p",null,"loading list..."),A.a.createElement("div",{className:"cat-list-menu"},A.a.createElement("label",{className:"form-label"},A.a.createElement(K,null),"category: "),A.a.createElement(k,{username:a.username,categoryId:c,setCategoryId:g,onError:i}),A.a.createElement("label",{className:"form-label"},A.a.createElement(K,null),"list: "),t,I)},re=function(e){var t=e.userState,a=e.pageView,c=e.setPageView,o=Object(n.useState)(""),l=Object(r.a)(o,2),C=l[0],I=l[1],u=Object(n.useState)(""),m=Object(r.a)(u,2),E=m[0],f=m[1],v=Object(n.useState)(""),b=Object(r.a)(v,2),h=b[0],N=b[1],w=Object(n.useState)(null),O=Object(r.a)(w,2),S=O[0],j=O[1],p=Object(n.useState)(null),T=Object(r.a)(p,2),L=T[0],P=T[1],U=Object(n.useState)(ee.a),k=Object(r.a)(U,2),B=k[0],Q=k[1];Object(n.useEffect)((function(){I(""),i().then((function(e){e.data.username!==t.username&&I(D.ACTION_NOT_PERMITTED)})).catch((function(e){I(D[e.code||"DEFAULT"])})),a.reqData&&(P(a.reqData.listId),j(a.reqData.categoryId))}),[a,t]);var x,R=A.a.createElement("div",{className:"view-title"},"Create New Item"),M=A.a.createElement("div",{className:"uploadImg-group"},A.a.createElement("img",{className:"img-preview",alt:"preview",src:B}),A.a.createElement("div",{className:"preview-text"},"preview"),A.a.createElement("input",{type:"file",text:"upload Image",className:"upload-input",onChange:function(e){var t=new FileReader;t.onload=function(){Q(t.result),console.log("preview: "+B)},t.readAsDataURL(e.target.files[0])}})),_=A.a.createElement("div",null,A.a.createElement(K,null),A.a.createElement("label",null,"item name: "),A.a.createElement("input",{className:"item-name-input",value:E,onChange:function(e){return f(e.target.value)}}),A.a.createElement(oe,{userState:t,categoryId:S,listId:L,setCategoryId:j,setListId:P,onError:function(e){I(D[e.code||"DEFAULT"])}}),A.a.createElement("label",{className:"form-label"},"description: "),A.a.createElement("textarea",{rows:"5",cols:"30",value:h,onChange:function(e){return N(e.target.value)}})),V=A.a.createElement(y,{text:"add",onClick:function(){if(E&&E.trim()){var e={itemName:E,description:h,listId:L,img:B};console.log(L),I(""),function(e){var t=e.username,a=e.listId,n=e.item;return fetch("/collectionLists/".concat(a,"/items"),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:t,item:n})}).catch(g).then((function(e){return e.ok?e.json():e.json().then(s)}))}({username:t.username,listId:L,item:e}).then((function(e){var t={listId:L,itemId:e.data.itemId};c({reqData:t,view:d.SINGLE_ITEM})})).catch((function(e){I(D[e.code||"DEFAULT"])}))}else I(D.INPUT_REQUIRED)}});return x=A.a.createElement("div",null,A.a.createElement("div",{className:(C?"":"hidden")+" error-box"},A.a.createElement("div",{className:"error-title"},"Sorry!"),C)),A.a.createElement("div",{className:"add-item-form"},x,A.a.createElement("div",{className:"title-area"},R),A.a.createElement("div",{className:"add-all"},A.a.createElement("div",{className:"add-left"},M),A.a.createElement("div",{className:"add-right"},_)),A.a.createElement("div",{className:"post-item-button"},V))},ge=function(e){var t,a=e.userState,n=e.pageView,c=e.setPageView,o=e.onLogout;switch(n.view){case d.INDEX:t=A.a.createElement(F,{setPageView:c});break;case d.SINGLE_CAT:t=A.a.createElement(X,{pageView:n,setPageView:c,onLogout:o});break;case d.USER_SELF:case d.USER_VIEW:t=A.a.createElement(q,{userState:a,pageView:n,setPageView:c,onLogout:o});break;case d.SINGLE_LIST:t=A.a.createElement(ne,{userState:a,pageView:n,setPageView:c});break;case d.SINGLE_ITEM:t=A.a.createElement(Ae,{userState:a,pageView:n,setPageView:c,onLogout:o});break;case d.POST_ITEM:t=A.a.createElement(re,{userState:a,pageView:n,setPageView:c});break;case d.EDIT_CAT:case d.EDIT_ITEM:t=A.a.createElement(N,null,"Coming soon...");break;default:t=""}return A.a.createElement("div",null,t)};var se=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)("colorful"),g=Object(r.a)(o,2),s=(g[0],g[1]),l=Object(n.useState)(!1),C=Object(r.a)(l,2),I=C[0],u=C[1],m=Object(n.useState)({reqData:null,view:d.INDEX}),E=Object(r.a)(m,2),f=E[0],v=E[1];Object(n.useEffect)((function(){i().then((function(e){c({isLoggedIn:!0,username:e.data.username}),s(e.data.theme)})).catch((function(e){c({isLoggedIn:!1,username:""})}))}),[]);var b,h=function(e){c({isLoggedIn:!0,username:e})},N=function(){c({isLoggedIn:!1,username:""})},w=function(e){v(e)};return a&&!a.isLoggedIn&&(b=A.a.createElement(T,{show:I,setShowDialog:u},A.a.createElement(j,{onLogin:h,setDialog:u,openDialog:!0,setPageView:w}))),A.a.createElement("div",{className:"App"},A.a.createElement(O,{userState:a,onLogout:N,setPageView:w,setLoginDialog:u}),A.a.createElement("div",{className:"main"},A.a.createElement(R,{userState:a,onLogin:h,pageView:f,setPageView:w,onLogout:N}),A.a.createElement("div",{className:"main-content"},A.a.createElement(ge,{userState:a,pageView:f,setPageView:w,onLogout:N}))),b)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(A.a.createElement(A.a.StrictMode,null,A.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.9019bcc0.chunk.js.map